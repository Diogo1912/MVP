# Nixpacks configuration for Railway

[phases.setup]
nixPkgs = ["python311", "postgresql"]

[phases.install]
cmds = [
    "python -m venv .venv",
    ".venv/bin/pip install --upgrade pip",
    ".venv/bin/pip install -r backend/requirements.txt"
]

[phases.build]
cmds = [".venv/bin/python backend/manage.py collectstatic --noinput"]

[start]
cmd = ".venv/bin/python backend/manage.py migrate && .venv/bin/gunicorn golexai.wsgi:application --bind 0.0.0.0:$PORT --chdir backend"

[variables]
PYTHONUNBUFFERED = "1"
